@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>
    ul.KL {
        text-align: justify;
    }
</style>
<div class="row">
    <div class="col-lg-6 col-md-8 col-sm-12">
        <h3 class="text-white">Chọn triệu chứng bạn đang gặp phải</h3>
        <div class="diagnosis-container">
            <form method="post" asp-controller="Diagnosis" asp-action="Result">
                <div class="pt-3 m-auto alert-heading text-monospace text-left" style="max-height: calc(100vh - 150px); overflow-y: auto;">
                    <table class="table table-bordered text-white">
                        <thead>
                            <tr>
                                <th></th>
                                <th class="align-content-center text-center">Triệu chứng</th>
                            </tr>
                        </thead>
                        <tbody>
                            @if (ViewBag.Sys != null)
                            {
                                @foreach (var symptom in ViewBag.Sys)
                                {
                                    <tr>
                                        <td>
                                            <input type="checkbox" name="SelectedSymptoms" value="@symptom.IdSym" class="symptom-checkbox" data-symptom="@symptom.NameSym" />
                                        </td>
                                        <td>
                                            @symptom.NameSym
                                        </td>
                                    </tr>
                                }
                            }
                            else
                            {
                                <tr>
                                    <td colspan="2">Không có triệu chứng nào để hiển thị.</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
                <button class="btn btn-outline-light w-100" type="submit">Chuẩn đoán</button>
            </form>
        </div>
    </div>
    <div class="pt-sm-5 col-lg-6 col-md-8 col-sm-12">
        <h3 class="text-white">Các triệu chứng bạn chọn</h3>
        <div class="Sym-container p-3 m-auto alert-heading text-monospace text-left text-white" style="max-height: calc(100vh - 150px); overflow-y: auto; background-color: rgba(255, 255, 255, 0.1);">
            <ul id="selected-symptoms-list" class="KL text-justify text-white"></ul>
            <div id="no-symptom-text" class="text-white-50">Chưa có triệu chứng nào được chọn</div>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const checkboxes = document.querySelectorAll('.symptom-checkbox');
        const selectedSymptomsList = document.getElementById('selected-symptoms-list');
        const noSymptomText = document.getElementById('no-symptom-text');

        // Kiểm tra xem các phần tử có tồn tại trước khi thao tác
        if (selectedSymptomsList && noSymptomText) {
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function () {
                    updateSelectedSymptoms();
                });
            });

            function updateSelectedSymptoms() {
                // Xóa danh sách hiện tại
                selectedSymptomsList.innerHTML = '';
                let selectedCount = 0;

                // Lặp qua tất cả các checkbox và lấy triệu chứng đã chọn
                checkboxes.forEach(checkbox => {
                    if (checkbox.checked) {
                        const symptomName = checkbox.getAttribute('data-symptom');
                        const listItem = document.createElement('li');
                        listItem.textContent = symptomName;
                        selectedSymptomsList.appendChild(listItem);
                        selectedCount++;
                    }
                });

                // Hiển thị hoặc ẩn thông báo "Chưa có triệu chứng nào được chọn"
                if (selectedCount > 0) {
                    // Khi có triệu chứng được chọn, hiển thị danh sách và ẩn thông báo
                    selectedSymptomsList.classList.remove('d-none');
                    noSymptomText.classList.add('d-none');
                } else {
                    // Khi không có triệu chứng nào được chọn, ẩn danh sách và hiển thị thông báo
                    selectedSymptomsList.classList.add('d-none');
                    noSymptomText.classList.remove('d-none');
                }

            }
        } else {
            console.error("Phần tử với ID 'selected-symptoms-list' hoặc 'no-symptom-text' không tồn tại.");
        }
    });
</script>